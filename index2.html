<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Checklist Caminhão</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <h2>Checklist do Caminhão</h2>

  <input id="motorista" placeholder="Nome do motorista"><br><br>
  <input id="frota" placeholder="Frota / Placa"><br><br>

  <strong>Status:</strong><br>
  <label>
    <input type="radio" name="status" value="SAÍDA"> SAÍDA
  </label><br>
  <label>
    <input type="radio" name="status" value="RETORNO"> RETORNO
  </label><br><br>

  <input id="video" type="file" accept="video/*" capture="environment"><br><br>

  <button onclick="enviar()">FINALIZAR CHECKLIST</button>

  <script>
    async function enviar() {
      const motorista = document.getElementById("motorista").value;
      const frota = document.getElementById("frota").value;
      const status = document.querySelector('input[name="status"]:checked');
      const videoFile = document.getElementById("video").files[0];

      if (!motorista || !frota || !status || !videoFile) {
        alert("Preencha tudo antes de enviar.");
        return;
      }

      const reader = new FileReader();
      reader.onload = async () => {
        await fetch(
          "https://script.google.com/macros/s/AKfycbxbddmgc9jniRWqnqc9kW5TFk84rxKRz86eZaALhO9MIDEJ4WLYXGtRr4_UJgiK-fx1gA/exec",
          {
            method: "POST",
            body: JSON.stringify({
              motorista,
              frota,
              status: status.value,
              video: reader.result
            })
          }
        );

        alert("Checklist enviado com sucesso!");
        window.location.reload();
      };

      reader.readAsDataURL(videoFile);
    }
  </script>
</body>
</html>
